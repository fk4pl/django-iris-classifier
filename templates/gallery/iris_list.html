{% extends 'base.html' %}
{% load static %}
{% load gallery_extras %}

{% block content %}
  <div style="display: flex; align-items: center; justify-content: space-between;">
    <h1>Iris Samples</h1>
    <img src="{% static 'images/setosa.png' %}" alt="Iris Icon" style="height: 50px;">
  </div>

  <h3>Manage Data</h3>
  {% if user.is_staff or user|has_group:"writer" %}
    <a href="{% url 'gallery:iris_create' %}">Add sample</a> | <a href="{% url 'gallery:import_csv' %}">Import CSV</a> | 
  {% endif %}
  <a href="{% url 'gallery:export_csv' %}">Export CSV</a>

  <table border="1" style="width:100%;margin-top:12px;border-collapse:collapse;">
    <tr><th>ID</th><th>Sepal L</th><th>Sepal W</th><th>Petal L</th><th>Petal W</th><th>Species</th><th>Actions</th></tr>
    {% for sample in samples %}
      <tr>
        <td>{{ sample.instance_id }}</td>
        <td>{{ sample.sepal_length }}</td>
        <td>{{ sample.sepal_width }}</td>
        <td>{{ sample.petal_length }}</td>
        <td>{{ sample.petal_width }}</td>
        <td>{{ sample.get_species_display }}</td>
        <td>
          <a href="{% url 'gallery:iris_detail' sample.pk %}">View</a>
          {% if user.is_staff or user|has_group:"writer" %}
             | <a href="{% url 'gallery:iris_update' sample.pk %}">Edit</a> | <a href="{% url 'gallery:iris_delete' sample.pk %}">Delete</a>
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="7">No samples.</td></tr>
    {% endfor %}
  </table>
{% endblock %}
